<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: init.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: init.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module init
 * @description
 * Initializes the application, sets up event listeners, and loads initial data.
 * Ensures all modules are ready and the UI is interactive on startup.
 */

/**
 * Initializes the application after the DOM is fully loaded.
 *
 * Loads data, sets up event listeners, shows the home section, populates filters,
 * displays popular content, and renders the featured slider.
 * Also manages export and import of watched content via JSON files.
 *
 * @event
 * @param {Event} event - The DOMContentLoaded event.
 * @returns {void}
 */
document.addEventListener("DOMContentLoaded", async () => {
  await loadData();
  setupEventListeners();
  showSection("home");
  populateFilters();
  displayPopularContent();
  renderFeaturedSlider();

  const exportBtn = document.getElementById("exportWatchedBtn");
  const importInput = document.getElementById("importWatchedInput");
  if (exportBtn) {
    /**
     * Handles the click event on the export button to download watched content as a JSON file.
     *
     * @event
     * @param {MouseEvent} event - The click event.
     * @returns {void}
     */
    exportBtn.addEventListener("click", () => {
      const data =
        localStorage.getItem("watchedContent") || '{"films":{},"series":{}}';
      const blob = new Blob([data], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `StreamIt_${new Date()
        .toLocaleDateString("fr-FR")
        .replace(/\//g, "_")}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });
  }
  if (importInput) {
    /**
     * Handles the change event on the import input to load watched content from a JSON file.
     *
     * @event
     * @param {Event} event - The change event.
     * @returns {void}
     */
    importInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (evt) {
        try {
          const imported = JSON.parse(evt.target.result);
          if (imported.films &amp;&amp; imported.series) {
            localStorage.setItem("watchedContent", JSON.stringify(imported));
            alert("Progression importée avec succès !");
            location.reload();
          } else {
            alert("Fichier invalide.");
          }
        } catch {
          alert("Erreur lors de l'import.");
        }
      };
      reader.readAsText(file);
    });
  }
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-add.html">add</a></li><li><a href="module-dataLoader.html">dataLoader</a></li><li><a href="module-display.html">display</a></li><li><a href="module-error.html">error</a></li><li><a href="module-filters.html">filters</a></li><li><a href="module-init.html">init</a></li><li><a href="module-modal.html">modal</a></li><li><a href="module-scripts.html">scripts</a></li><li><a href="module-search.html">search</a></li><li><a href="module-stats.html">stats</a></li><li><a href="module-storage.html">storage</a></li><li><a href="module-utils.html">utils</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Oct 17 2025 19:01:30 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
